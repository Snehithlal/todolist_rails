<% if @arrow.is_a?Hash %>
  $(".err_msg").show();
  $(".err_msg").html('<% @todolist[:error].each do |msg|%> <%=msg%></br> <%end%>').delay(3000).fadeOut();
<%else%>
$(".err_msg").hide();
var current_div = $("#<%=@todo_details.id%>");
if ("<%=@arrow%>" == "down"){
  var next_div = $("#<%=@todo_details.id%>").next();
  var current_todo = current_div.clone();
  var next_todo = next_div.clone();
  current_div.replaceWith(next_todo);
  next_div.replaceWith(current_todo);
}else{
  var prev_div = $("#<%=@todo_details.id%>").prev();
  var current_todo = current_div.clone();
  var prev_todo = prev_div.clone();
  current_div.replaceWith(prev_todo);
  prev_div.replaceWith(current_todo);
}
<%end%>
reset_arrow();
